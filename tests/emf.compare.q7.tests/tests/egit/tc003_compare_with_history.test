--- Q7 testcase ---
Format-Version: 1.0
Q7-vendor: www.xored.com/q7
Contexts: _LOMGYGrvEeK_JdLra2Bk5A,_YvO_QG9-EeKmUfxl9qSLpg,_pj0X4HBcEeKTzKjv1SXOgA
Element-Name: tc003_compare_with_history
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _NQSUAHBgEeKTzKjv1SXOgA
Save-Time: 2/6/13 5:07 PM
Testcase-Type: ecl

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa
Content-Type: text/plain
Entry-Name: .description

This test must validate a comparison with egit > compare with > previous revision.

TEST STEPS
	1) Select the library project and then select the library.ecore file.
    2) Right-click Compare With > Previous Revision.
	3) The Compare editor must show one diff : Library [eClassifiers delete] under library package.
		//Asserts that the compare editor is open.
		//Asserts that the structure merge viewer contains one diff that is Library [eClassifiers delete].

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa--
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

get-view "Package Explorer" | get-tree | select "library \\[emf-compare-library-egit master\\]/library.ecore" 
    | get-menu "Compare With/History..." | click
get-view History | get-table | select db84a95 | double-click
get-tab-folder -index 1 | get-property activePage | equals "Compare library.ecore Current and db84a95..." | verify-true
with [get-editor "Compare library.ecore Current and db84a95..." | get-tree] {
    get-property itemCount | equals 1 | verify-true
    get-property "getItems().TreeItem[0].getItems().length" | equals 1 | verify-true
    get-property "getItems().TreeItem[0].getItems().TreeItem[0].getText()" | equals "Library [eClassifiers delete]" 
        | verify-true
    get-property "getItems().TreeItem[0].getText()" | equals library | verify-true
}
with [get-view "Package Explorer" | get-tree] {
    get-item "library \\[emf-compare-library-egit master\\]" | get-property caption 
        | equals "library [emf-compare-library-egit master]" | verify-true
    get-item "library \\[emf-compare-library-egit master\\]" | get-property "getItems().length" | equals 1 | verify-true
    get-item "library \\[emf-compare-library-egit master\\]" | get-property "getItems().TreeItem[0].getText()" 
        | equals "library.ecore" | verify-true
}
//Deletes the repository in order to clean the Git repositories view for the next test.
get-button "Open Perspective" | click
with [get-window "Open Perspective"] {
    get-table | select "Git Repository Exploring"
    get-button OK | click
}
get-view "Git Repositories" | get-tree 
    | select "emf-compare-library-egit .*" 
    | key-type Del
get-window "Delete Repository" | get-button OK | click
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
